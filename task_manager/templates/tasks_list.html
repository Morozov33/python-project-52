{% extends "base.html" %}
{% load bootstrap4 %}

{% block content %}
<h3 class="my-4">Tasks list:</h3>
<h5><a href="/tasks/create/">Create task</a></h5>
<div class="card mb-3">
    <div class="card-body bg-light">
        <form  method="get">
            {% bootstrap_form filter.form layout='inline-block' %}
            <div class="form-group"><div class="mr-3"><div class="form-check"><input type="checkbox" name="self_tasks" class="form-check-input" id="id_self_tasks"><label class="form-check-label" for="id_self_tasks">Only my task</label></div></div></div>
            <input class="btn btn-primary" type="submit" value="Apply">
        </form>
    </div>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Status</th>
      <th>Author</th>
      <th>Executor</th>
      <th>Date create</th>
      <th></th>
    </tr>
  </thead>
  <tbody>

    {% for task in filter.qs %}
        <tr>
            <td>{{ task.id }}</td>
            <td><a href="tasks/{{ task.id }}/">{{ task.name }}</a></td>
            <td>{{ task.status }}</td>
            <td>{{ task.creator }}</td>
            <td>{{ task.executor }}</td>
            <td>{{ task.created_at }}</td>
            {% if user.is_authenticated %}
                <td>
                    <a href="/tasks/{{ task.id }}/update/">Update</a>
                    <br>
                    {% if user.id == task.creator_id %}
                        <a href="/tasks/{{ task.id }}/delete/">Delete</a>
                    {% endif %}
                </td>
            {% else %}
                <td></td>
            {% endif %}
        </tr>
    {% endfor %}

  </tbody>
</table>
{% endblock %}
